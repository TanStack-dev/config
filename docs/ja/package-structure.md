---
source-updated-at: '2024-07-19T09:06:46.000Z'
translation-updated-at: '2025-04-25T17:03:59.913Z'
id: package-structure
title: パッケージ構造
---
以下は、パッケージがモノレポ/Nxワークフローで最適に動作することを保証する構造です。

### `./package.json`

- すべてのTanStackプロジェクトには、`.js`ファイルのデフォルト解決をESMに設定するため`"type": "module"`が含まれます。これはCJS向けのビルドには影響しません
- `"exports"`フィールドを含めることも必須です
- レガシーな理由により、`"main"`、`"module"`、`"types"`フィールドも含める必要があります
- すべてのパッケージには、Nxによってキャッシュされる以下のスクリプトが含まれます: `"test:eslint"`、`"test:types"`、`"test:lib"`、`"build"`、`"test:build"`

### `./tsconfig.json`

- ルートレベルのtsconfigを拡張します（例: `"extends": "../../tsconfig.json"`）
- フレームワーク固有のオプションや含めるファイルをここに追加します

### `./vite.config.ts`

- Vitestの設定を含み、[@tanstack/config/vite](./vite.md)が使用されている場合はViteの設定も含みます

### `./src`

- このフォルダには、ビルドされてユーザーに配布されるコードのみを含めるべきです
- テストはこのフォルダに配置すべきではありません。配布コードを膨張させ、意図せずNxキャッシュを無効にする可能性があります

### `./tests`

- このフォルダにはすべてのテストファイルを含めるべきです
- また、そのフレームワークで必要なテストセットアップファイルも含めるべきです
